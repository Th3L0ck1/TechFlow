name: CI Pipeline - Sistema de Tarefas

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    name: Executar Testes do Sistema
    
    steps:
    - name: Checkout do cÃ³digo
      uses: actions/checkout@v4
      
    - name: Configurar Node.js (apenas para executar JavaScript)
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        # REMOVEMOS o cache: npm que estava causando o erro
      
    - name: Executar testes automatizados
      run: |
        echo "ğŸš€ Iniciando testes do sistema de tarefas..."
        node tests/test.js
        echo "âœ… Testes executados com sucesso!"
        
    - name: Validar estrutura do projeto
      run: |
        echo "ğŸ” Verificando arquivos do projeto..."
        echo "ğŸ“ Estrutura de arquivos:"
        ls -la
        echo "ğŸ“ ConteÃºdo da pasta src:"
        ls -la src/
        echo "ğŸ“ ConteÃºdo da pasta tests:"
        ls -la tests/
        
        # ValidaÃ§Ã£o dos arquivos essenciais
        if [ -f "src/index.html" ]; then
          echo "âœ… Arquivo HTML encontrado"
        else
          echo "âŒ ERRO: Arquivo HTML nÃ£o encontrado"
          exit 1
        fi
        
        if [ -f "src/script.js" ]; then
          echo "âœ… Arquivo JavaScript encontrado"
        else
          echo "âŒ ERRO: Arquivo JavaScript nÃ£o encontrado"
          exit 1
        fi
        
        if [ -f "tests/test.js" ]; then
          echo "âœ… Arquivo de testes encontrado"
        else
          echo "âŒ ERRO: Arquivo de testes nÃ£o encontrado"
          exit 1
        fi
        
        echo "ğŸ‰ Estrutura do projeto validada com sucesso!"